// ==================== ORBIS MIXINS ====================

// Flexbox utilities
@mixin flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

@mixin flex-between {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

@mixin flex-start {
  display: flex;
  align-items: center;
  justify-content: flex-start;
}

@mixin flex-column {
  display: flex;
  flex-direction: column;
}

// Typography
@mixin text-truncate {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

@mixin line-clamp($lines: 2) {
  display: -webkit-box;
  -webkit-line-clamp: $lines;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

// Responsive breakpoints
@mixin respond-to($breakpoint) {
  @if map-has-key($grid-breakpoints, $breakpoint) {
    @media (min-width: #{map-get($grid-breakpoints, $breakpoint)}) {
      @content;
    }
  } @else {
    @warn "Unknown breakpoint: #{$breakpoint}";
  }
}

@mixin respond-below($breakpoint) {
  @if map-has-key($grid-breakpoints, $breakpoint) {
    @media (max-width: #{map-get($grid-breakpoints, $breakpoint) - 1}) {
      @content;
    }
  } @else {
    @warn "Unknown breakpoint: #{$breakpoint}";
  }
}

// Card style
@mixin card-base {
  background: var(--bg-primary);
  border: 1px solid var(--border-secondary);
  border-radius: $radius-lg;
  box-shadow: $shadow-sm;
  transition: all $transition-base;
}

@mixin card-hover {
  &:hover {
    border-color: var(--border-primary);
    box-shadow: $shadow-md;
    transform: translateY(-2px);
  }
}

// Button variants
@mixin button-base {
  display: inline-flex;
  align-items: center;
  gap: $spacing-2;
  padding: $spacing-2 $spacing-4;
  border-radius: $radius-md $radius-md 0 $radius-md;
  font-weight: $font-weight-semibold;
  transition: all $transition-fast;
  cursor: pointer;
  border: none;
  outline: none;

  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
}

@mixin button-primary {
  background: $accent-primary;
  color: white;

  &:hover:not(:disabled) {
    background: $accent-hover;
    box-shadow: $shadow-glow;
  }

  &:active {
    transform: scale(0.98);
  }
}

@mixin button-secondary {
  background: var(--bg-hover);
  color: var(--text-primary);
  border: 1px solid var(--border-primary);

  &:hover:not(:disabled) {
    background: var(--bg-card);
    border-color: var(--border-accent);
  }
}

@mixin button-ghost {
  background: transparent;
  color: var(--text-secondary);

  &:hover:not(:disabled) {
    background: var(--bg-hover);
    color: var(--text-primary);
  }
}

// Input styles
@mixin input-base {
  width: 100%;
  padding: $spacing-3 $spacing-4;
  background: var(--bg-input);
  border: 1px solid var(--border-primary);
  border-radius: $radius-md;
  color: var(--text-primary);
  font-size: $font-size-sm;
  transition: all $transition-fast;

  &::placeholder {
    color: var(--text-muted);
  }

  &:focus {
    outline: none;
    border-color: $accent-primary;
    box-shadow: 0 0 0 3px $accent-muted;
  }

  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
}

// Badge/Tag styles
@mixin badge-base {
  display: inline-flex;
  align-items: center;
  gap: $spacing-1;
  padding: $spacing-1 $spacing-2;
  border-radius: $radius-sm $radius-sm $radius-sm 0;
  font-size: $font-size-xs;
  font-weight: $font-weight-medium;
  white-space: nowrap;
}

// Level badge variant
@mixin level-badge($color) {
  @include badge-base;
  background: rgba($color, 0.15);
  color: $color;
  border: 1px solid rgba($color, 0.3);
}

// Orb card (sphere card from template)
@mixin orb-card {
  @include card-base;
  padding: $spacing-6;
  text-align: center;
  cursor: pointer;
  position: relative;
  overflow: hidden;

  &::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: var(--orb-color, $accent-primary);
    transform: scaleX(0);
    transform-origin: left;
    transition: transform $transition-base;
  }

  &:hover {
    @include card-hover;

    &::before {
      transform: scaleX(1);
    }
  }
}

// Icon wrapper
@mixin icon-wrapper($size: 40px, $bg: $accent-muted) {
  width: $size;
  height: $size;
  border-radius: $radius-md;
  background: $bg;
  @include flex-center;
  flex-shrink: 0;

  svg {
    width: $size * 0.5;
    height: $size * 0.5;
  }
}

// Gradient background
@mixin gradient-bg($color1: $accent-primary, $color2: $orb-programming) {
  background: linear-gradient(135deg, $color1 0%, $color2 100%);
}

// Glassmorphism effect
@mixin glass-effect {
  background: rgba(255, 255, 255, 0.05);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

// Scrollbar styling
@mixin custom-scrollbar($width: 8px) {
  &::-webkit-scrollbar {
    width: $width;
  }

  &::-webkit-scrollbar-track {
    background: var(--bg-surface);
  }

  &::-webkit-scrollbar-thumb {
    background: var(--border-primary);
    border-radius: $radius-full;

    &:hover {
      background: var(--text-muted);
    }
  }
}

// Animation keyframes
@mixin pulse-animation {
  @keyframes pulse {
    0%,
    100% {
      transform: scale(1);
    }
    50% {
      transform: scale(1.3);
    }
  }
}

@mixin fade-in {
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
}

@mixin slide-in-right {
  @keyframes slideInRight {
    from {
      opacity: 0;
      transform: translateX(-20px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }
}

// Focus visible outline
@mixin focus-visible {
  &:focus-visible {
    outline: 2px solid $accent-primary;
    outline-offset: 2px;
  }
}

// Skeleton loading
@mixin skeleton-loading {
  background: linear-gradient(90deg, var(--bg-card) 0%, var(--bg-hover) 50%, var(--bg-card) 100%);
  background-size: 200% 100%;
  animation: loading 1.5s ease-in-out infinite;

  @keyframes loading {
    0% {
      background-position: 200% 0;
    }
    100% {
      background-position: -200% 0;
    }
  }
}
